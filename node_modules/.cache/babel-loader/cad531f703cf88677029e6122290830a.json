{"ast":null,"code":"import _regeneratorRuntime from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport var CameraWeb = /*#__PURE__*/function (_WebPlugin) {\n  _inherits(CameraWeb, _WebPlugin);\n\n  var _super = _createSuper(CameraWeb);\n\n  function CameraWeb() {\n    _classCallCheck(this, CameraWeb);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CameraWeb, [{\n    key: \"getPhoto\",\n    value: function () {\n      var _getPhoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(options) {\n        var _this = this;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                    var actionSheet;\n                    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (options.webUseInput || options.source === CameraSource.Photos) {\n                              _this.fileInputExperience(options, resolve);\n                            } else if (options.source === CameraSource.Prompt) {\n                              actionSheet = document.querySelector('pwa-action-sheet');\n\n                              if (!actionSheet) {\n                                actionSheet = document.createElement('pwa-action-sheet');\n                                document.body.appendChild(actionSheet);\n                              }\n\n                              actionSheet.header = options.promptLabelHeader || 'Photo';\n                              actionSheet.cancelable = false;\n                              actionSheet.options = [{\n                                title: options.promptLabelPhoto || 'From Photos'\n                              }, {\n                                title: options.promptLabelPicture || 'Take Picture'\n                              }];\n                              actionSheet.addEventListener('onSelection', /*#__PURE__*/function () {\n                                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n                                  var selection;\n                                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          selection = e.detail;\n\n                                          if (selection === 0) {\n                                            _this.fileInputExperience(options, resolve);\n                                          } else {\n                                            _this.cameraExperience(options, resolve, reject);\n                                          }\n\n                                        case 2:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee);\n                                }));\n\n                                return function (_x4) {\n                                  return _ref2.apply(this, arguments);\n                                };\n                              }());\n                            } else {\n                              _this.cameraExperience(options, resolve, reject);\n                            }\n\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function getPhoto(_x) {\n        return _getPhoto.apply(this, arguments);\n      }\n\n      return getPhoto;\n    }()\n  }, {\n    key: \"pickImages\",\n    value: function () {\n      var _pickImages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_options) {\n        var _this2 = this;\n\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(resolve) {\n                    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _this2.multipleFileInputExperience(resolve);\n\n                          case 1:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function (_x6) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function pickImages(_x5) {\n        return _pickImages.apply(this, arguments);\n      }\n\n      return pickImages;\n    }()\n  }, {\n    key: \"cameraExperience\",\n    value: function () {\n      var _cameraExperience = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(options, resolve, reject) {\n        var _this3 = this;\n\n        var cameraModal;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!customElements.get('pwa-camera-modal')) {\n                  _context7.next = 16;\n                  break;\n                }\n\n                cameraModal = document.createElement('pwa-camera-modal');\n                cameraModal.facingMode = options.direction === CameraDirection.Front ? 'user' : 'environment';\n                document.body.appendChild(cameraModal);\n                _context7.prev = 4;\n                _context7.next = 7;\n                return cameraModal.componentOnReady();\n\n              case 7:\n                cameraModal.addEventListener('onPhoto', /*#__PURE__*/function () {\n                  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e) {\n                    var photo;\n                    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                      while (1) {\n                        switch (_context6.prev = _context6.next) {\n                          case 0:\n                            photo = e.detail;\n\n                            if (!(photo === null)) {\n                              _context6.next = 5;\n                              break;\n                            }\n\n                            reject(new CapacitorException('User cancelled photos app'));\n                            _context6.next = 14;\n                            break;\n\n                          case 5:\n                            if (!(photo instanceof Error)) {\n                              _context6.next = 9;\n                              break;\n                            }\n\n                            reject(photo);\n                            _context6.next = 14;\n                            break;\n\n                          case 9:\n                            _context6.t0 = resolve;\n                            _context6.next = 12;\n                            return _this3._getCameraPhoto(photo, options);\n\n                          case 12:\n                            _context6.t1 = _context6.sent;\n                            (0, _context6.t0)(_context6.t1);\n\n                          case 14:\n                            cameraModal.dismiss();\n                            document.body.removeChild(cameraModal);\n\n                          case 16:\n                          case \"end\":\n                            return _context6.stop();\n                        }\n                      }\n                    }, _callee6);\n                  }));\n\n                  return function (_x10) {\n                    return _ref4.apply(this, arguments);\n                  };\n                }());\n                cameraModal.present();\n                _context7.next = 14;\n                break;\n\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7[\"catch\"](4);\n                this.fileInputExperience(options, resolve);\n\n              case 14:\n                _context7.next = 18;\n                break;\n\n              case 16:\n                console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\");\n                this.fileInputExperience(options, resolve);\n\n              case 18:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[4, 11]]);\n      }));\n\n      function cameraExperience(_x7, _x8, _x9) {\n        return _cameraExperience.apply(this, arguments);\n      }\n\n      return cameraExperience;\n    }()\n  }, {\n    key: \"fileInputExperience\",\n    value: function fileInputExperience(options, resolve) {\n      var input = document.querySelector('#_capacitor-camera-input');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input';\n        input.type = 'file';\n        input.hidden = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var file = input.files[0];\n          var format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n\n          if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n            var reader = new FileReader();\n            reader.addEventListener('load', function () {\n              if (options.resultType === 'dataUrl') {\n                resolve({\n                  dataUrl: reader.result,\n                  format: format\n                });\n              } else if (options.resultType === 'base64') {\n                var b64 = reader.result.split(',')[1];\n                resolve({\n                  base64String: b64,\n                  format: format\n                });\n              }\n\n              cleanup();\n            });\n            reader.readAsDataURL(file);\n          } else {\n            resolve({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n            cleanup();\n          }\n        });\n      }\n\n      input.accept = 'image/*';\n      input.capture = true;\n\n      if (options.source === CameraSource.Photos || options.source === CameraSource.Prompt) {\n        input.removeAttribute('capture');\n      } else if (options.direction === CameraDirection.Front) {\n        input.capture = 'user';\n      } else if (options.direction === CameraDirection.Rear) {\n        input.capture = 'environment';\n      }\n\n      input.click();\n    }\n  }, {\n    key: \"multipleFileInputExperience\",\n    value: function multipleFileInputExperience(resolve) {\n      var input = document.querySelector('#_capacitor-camera-input-multiple');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input-multiple';\n        input.type = 'file';\n        input.hidden = true;\n        input.multiple = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var photos = []; // eslint-disable-next-line @typescript-eslint/prefer-for-of\n\n          for (var i = 0; i < input.files.length; i++) {\n            var file = input.files[i];\n            var format = 'jpeg';\n\n            if (file.type === 'image/png') {\n              format = 'png';\n            } else if (file.type === 'image/gif') {\n              format = 'gif';\n            }\n\n            photos.push({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n          }\n\n          resolve({\n            photos: photos\n          });\n          cleanup();\n        });\n      }\n\n      input.accept = 'image/*';\n      input.click();\n    }\n  }, {\n    key: \"_getCameraPhoto\",\n    value: function _getCameraPhoto(photo, options) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var format = photo.type.split('/')[1];\n\n        if (options.resultType === 'uri') {\n          resolve({\n            webPath: URL.createObjectURL(photo),\n            format: format,\n            saved: false\n          });\n        } else {\n          reader.readAsDataURL(photo);\n\n          reader.onloadend = function () {\n            var r = reader.result;\n\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: r,\n                format: format,\n                saved: false\n              });\n            } else {\n              resolve({\n                base64String: r.split(',')[1],\n                format: format,\n                saved: false\n              });\n            }\n          };\n\n          reader.onerror = function (e) {\n            reject(e);\n          };\n        }\n      });\n    }\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var permission;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(typeof navigator === 'undefined' || !navigator.permissions)) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw this.unavailable('Permissions API not available in this browser');\n\n              case 2:\n                _context8.prev = 2;\n                _context8.next = 5;\n                return window.navigator.permissions.query({\n                  name: 'camera'\n                });\n\n              case 5:\n                permission = _context8.sent;\n                return _context8.abrupt(\"return\", {\n                  camera: permission.state,\n                  photos: 'granted'\n                });\n\n              case 9:\n                _context8.prev = 9;\n                _context8.t0 = _context8[\"catch\"](2);\n                throw this.unavailable('Camera permissions are not available in this browser');\n\n              case 12:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[2, 9]]);\n      }));\n\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                throw this.unimplemented('Not implemented on web.');\n\n              case 1:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n\n      return requestPermissions;\n    }()\n  }]);\n\n  return CameraWeb;\n}(WebPlugin);\nvar Camera = new CameraWeb();\nexport { Camera };","map":{"version":3,"mappings":"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","names":["WebPlugin","CapacitorException","CameraSource","CameraDirection","CameraWeb","options","Promise","resolve","reject","webUseInput","source","Photos","fileInputExperience","Prompt","actionSheet","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","e","selection","detail","cameraExperience","_options","multipleFileInputExperience","customElements","get","cameraModal","facingMode","direction","Front","componentOnReady","photo","Error","_getCameraPhoto","dismiss","removeChild","present","console","error","input","cleanup","parentNode","_a","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","Rear","click","multiple","photos","i","length","push","saved","onloadend","r","onerror","navigator","permissions","unavailable","window","query","name","permission","camera","state","unimplemented","Camera"],"sources":["/data/data/com.termux/files/home/Ionic/ExploringApp/node_modules/@capacitor/camera/src/web.ts"],"sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\n\nimport { CameraSource, CameraDirection } from './definitions';\nimport type {\n  CameraPlugin,\n  GalleryImageOptions,\n  GalleryPhotos,\n  ImageOptions,\n  PermissionStatus,\n  Photo,\n} from './definitions';\n\nexport class CameraWeb extends WebPlugin implements CameraPlugin {\n  async getPhoto(options: ImageOptions): Promise<Photo> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<Photo>(async (resolve, reject) => {\n      if (options.webUseInput || options.source === CameraSource.Photos) {\n        this.fileInputExperience(options, resolve);\n      } else if (options.source === CameraSource.Prompt) {\n        let actionSheet: any = document.querySelector('pwa-action-sheet');\n        if (!actionSheet) {\n          actionSheet = document.createElement('pwa-action-sheet');\n          document.body.appendChild(actionSheet);\n        }\n        actionSheet.header = options.promptLabelHeader || 'Photo';\n        actionSheet.cancelable = false;\n        actionSheet.options = [\n          { title: options.promptLabelPhoto || 'From Photos' },\n          { title: options.promptLabelPicture || 'Take Picture' },\n        ];\n        actionSheet.addEventListener('onSelection', async (e: any) => {\n          const selection = e.detail;\n          if (selection === 0) {\n            this.fileInputExperience(options, resolve);\n          } else {\n            this.cameraExperience(options, resolve, reject);\n          }\n        });\n      } else {\n        this.cameraExperience(options, resolve, reject);\n      }\n    });\n  }\n\n  async pickImages(_options: GalleryImageOptions): Promise<GalleryPhotos> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<GalleryPhotos>(async resolve => {\n      this.multipleFileInputExperience(resolve);\n    });\n  }\n\n  private async cameraExperience(\n    options: ImageOptions,\n    resolve: any,\n    reject: any,\n  ) {\n    if (customElements.get('pwa-camera-modal')) {\n      const cameraModal: any = document.createElement('pwa-camera-modal');\n      cameraModal.facingMode =\n        options.direction === CameraDirection.Front ? 'user' : 'environment';\n      document.body.appendChild(cameraModal);\n      try {\n        await cameraModal.componentOnReady();\n        cameraModal.addEventListener('onPhoto', async (e: any) => {\n          const photo = e.detail;\n\n          if (photo === null) {\n            reject(new CapacitorException('User cancelled photos app'));\n          } else if (photo instanceof Error) {\n            reject(photo);\n          } else {\n            resolve(await this._getCameraPhoto(photo, options));\n          }\n\n          cameraModal.dismiss();\n          document.body.removeChild(cameraModal);\n        });\n\n        cameraModal.present();\n      } catch (e) {\n        this.fileInputExperience(options, resolve);\n      }\n    } else {\n      console.error(\n        `Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.`,\n      );\n      this.fileInputExperience(options, resolve);\n    }\n  }\n\n  private fileInputExperience(options: ImageOptions, resolve: any) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input';\n      input.type = 'file';\n      input.hidden = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const file = input.files![0];\n        let format = 'jpeg';\n\n        if (file.type === 'image/png') {\n          format = 'png';\n        } else if (file.type === 'image/gif') {\n          format = 'gif';\n        }\n\n        if (\n          options.resultType === 'dataUrl' ||\n          options.resultType === 'base64'\n        ) {\n          const reader = new FileReader();\n\n          reader.addEventListener('load', () => {\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: reader.result,\n                format,\n              } as Photo);\n            } else if (options.resultType === 'base64') {\n              const b64 = (reader.result as string).split(',')[1];\n              resolve({\n                base64String: b64,\n                format,\n              } as Photo);\n            }\n\n            cleanup();\n          });\n\n          reader.readAsDataURL(file);\n        } else {\n          resolve({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n          cleanup();\n        }\n      });\n    }\n\n    input.accept = 'image/*';\n    (input as any).capture = true;\n\n    if (\n      options.source === CameraSource.Photos ||\n      options.source === CameraSource.Prompt\n    ) {\n      input.removeAttribute('capture');\n    } else if (options.direction === CameraDirection.Front) {\n      (input as any).capture = 'user';\n    } else if (options.direction === CameraDirection.Rear) {\n      (input as any).capture = 'environment';\n    }\n\n    input.click();\n  }\n\n  private multipleFileInputExperience(resolve: any) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input-multiple',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input-multiple';\n      input.type = 'file';\n      input.hidden = true;\n      input.multiple = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const photos = [];\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (let i = 0; i < input.files!.length; i++) {\n          const file = input.files![i];\n          let format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n          photos.push({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n        }\n        resolve({ photos });\n        cleanup();\n      });\n    }\n\n    input.accept = 'image/*';\n\n    input.click();\n  }\n\n  private _getCameraPhoto(photo: Blob, options: ImageOptions) {\n    return new Promise<Photo>((resolve, reject) => {\n      const reader = new FileReader();\n      const format = photo.type.split('/')[1];\n      if (options.resultType === 'uri') {\n        resolve({\n          webPath: URL.createObjectURL(photo),\n          format: format,\n          saved: false,\n        });\n      } else {\n        reader.readAsDataURL(photo);\n        reader.onloadend = () => {\n          const r = reader.result as string;\n          if (options.resultType === 'dataUrl') {\n            resolve({\n              dataUrl: r,\n              format: format,\n              saved: false,\n            });\n          } else {\n            resolve({\n              base64String: r.split(',')[1],\n              format: format,\n              saved: false,\n            });\n          }\n        };\n        reader.onerror = e => {\n          reject(e);\n        };\n      }\n    });\n  }\n\n  async checkPermissions(): Promise<PermissionStatus> {\n    if (typeof navigator === 'undefined' || !navigator.permissions) {\n      throw this.unavailable('Permissions API not available in this browser');\n    }\n\n    try {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n      // the specific permissions that are supported varies among browsers that implement the\n      // permissions API, so we need a try/catch in case 'camera' is invalid\n      const permission = await window.navigator.permissions.query({\n        name: 'camera',\n      });\n      return {\n        camera: permission.state,\n        photos: 'granted',\n      };\n    } catch {\n      throw this.unavailable(\n        'Camera permissions are not available in this browser',\n      );\n    }\n  }\n\n  async requestPermissions(): Promise<PermissionStatus> {\n    throw this.unimplemented('Not implemented on web.');\n  }\n}\n\nconst Camera = new CameraWeb();\n\nexport { Camera };\n"]},"metadata":{},"sourceType":"module"}